!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e,t){return{width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y),x:Math.min(t.x,e.x),y:Math.min(t.y,e.y)}}var r;n.r(t),function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.pencil="pencil"}(r||(r={}));const s=document.getElementById("canvas");new class{constructor(e,t){this.isDragging=!1,this.initialPoint={x:0,y:0},this.shapes=[],this.draw=()=>{const e=this.canvas.getContext("2d");e&&(e.clearRect(0,0,this.canvas.clientWidth,this.canvas.clientHeight),e.lineWidth=2,this.shapes.forEach(t=>{switch(e.strokeStyle=t.stroke,t.type){case"rectangle":e.fillStyle=t.fill,e.fillRect(t.x,t.y,t.width,t.height),e.strokeRect(t.x,t.y,t.width,t.height);break;case"ellipse":e.fillStyle=t.fill,e.beginPath(),e.ellipse(t.x+t.width/2,t.y+t.height/2,t.width/2,t.height/2,0,0,2*Math.PI),e.fill(),e.stroke();break;case"polyline":const[n,...i]=t.points;e.beginPath(),n&&e.moveTo(n.x,n.y),i.forEach(t=>{e.lineTo(t.x,t.y)}),e.stroke()}}),requestAnimationFrame(this.draw))},this.handleMouseDown=e=>{let t;this.isDragging=!0,this.initialPoint=this.getPoint(e);const n=this.getCurrentToolType();if(n===r.pencil)t={type:"polyline",stroke:this.getCurrentStroke(),points:[this.initialPoint]};else{t={type:n,...i(this.initialPoint,this.initialPoint),stroke:"dodgerblue",fill:"transparent"}}this.shapes.push(t),this.currentShape=t,e.preventDefault()},this.handleMouseMove=e=>{var t;if(!this.isDragging)return;const n=this.getPoint(e);switch(null===(t=this.currentShape)||void 0===t?void 0:t.type){case"rectangle":case"ellipse":{const e=i(this.initialPoint,n);return void Object.assign(this.currentShape,e)}case"polyline":return void this.currentShape.points.push(n)}},this.handleMouseUp=e=>{var t;if(!this.isDragging)return;this.isDragging=!1;const n=this.getPoint(e);switch(null===(t=this.currentShape)||void 0===t?void 0:t.type){case"rectangle":case"ellipse":{const e=i(this.initialPoint,n),t=this.getCurrentFill(),r=this.getCurrentStroke();Object.assign(this.currentShape,{...e,fill:t,stroke:r});break}case"polyline":this.currentShape.points.push(n)}e.stopPropagation()},this.handleGlobalMouseUp=()=>{if(!this.isDragging)return;this.isDragging=!1;this.getCurrentToolType()!==r.pencil&&(this.shapes=this.shapes.filter(e=>e!==this.currentShape))},this.canvas=e,this.getCurrentToolType=t.getCurrentToolType,this.getCurrentStroke=t.getCurrentStroke,this.getCurrentFill=t.getCurrentFill,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mouseup",this.handleGlobalMouseUp),e.addEventListener("touchstart",this.handleMouseDown),e.addEventListener("touchmove",this.handleMouseMove),e.addEventListener("touchend",this.handleMouseUp),document.addEventListener("touchend",this.handleGlobalMouseUp),requestAnimationFrame(this.draw)}getPoint(e){const t=this.canvas.getBoundingClientRect(),n=function(e){return function(e){return e.type.startsWith("touch")}(e)?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}}(e);return{x:n.x-t.x,y:n.y-t.y}}}(s,{getCurrentFill:function(){return document.querySelector("#fill").value},getCurrentStroke:function(){return document.querySelector("#stroke").value},getCurrentToolType:function(){switch(document.querySelector('input[name="tool"]:checked').value){case"rectangle":return r.rectangle;case"ellipse":return r.ellipse;case"pencil":return r.pencil;default:throw new Error("Invalid tool type")}}})}]);
//# sourceMappingURL=index.js.map